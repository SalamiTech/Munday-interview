<!-- Review List Container -->
<div class="list-container">
    <!-- Header -->
    <div class="list-header">
        <h1>Reviews</h1>
        <button class="btn btn-primary" (click)="onCreateReview()">
            Write Review
        </button>
    </div>

    <!-- Filters -->
    <div class="filters">
        <div class="search-box">
            <input type="text"
                   [(ngModel)]="searchQuery"
                   (ngModelChange)="onSearch($event)"
                   placeholder="Search reviews..."
                   class="form-input">
            <span class="search-icon">üîç</span>
        </div>

        <select [(ngModel)]="statusFilter"
                (ngModelChange)="onFilterChange()"
                class="form-select">
            <option value="">All Statuses</option>
            <option value="pending">Pending</option>
            <option value="approved">Approved</option>
            <option value="rejected">Rejected</option>
        </select>

        <select [(ngModel)]="sortBy"
                (ngModelChange)="onFilterChange()"
                class="form-select">
            <option value="createdAt:DESC">Most Recent</option>
            <option value="rating:DESC">Highest Rating</option>
            <option value="rating:ASC">Lowest Rating</option>
            <option value="helpfulCount:DESC">Most Helpful</option>
        </select>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading">
        Loading reviews...
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="error-message">
        {{ error }}
        <button class="btn btn-outline" (click)="loadReviews()">Try Again</button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && !error && reviews.length === 0" class="empty-state">
        <p>No reviews found</p>
        <button class="btn btn-primary" (click)="onCreateReview()">Write First Review</button>
    </div>

    <!-- Reviews Grid -->
    <div *ngIf="!isLoading && !error && reviews.length > 0" class="reviews-grid">
        <div *ngFor="let review of reviews" class="review-card">
            <div class="review-header">
                <div class="review-info">
                    <h3>{{ review.organization?.name }}</h3>
                    <p class="meta">by {{ review.user?.fullName || 'Anonymous' }} ‚Ä¢ {{ review.createdAt | date }}</p>
                </div>
                <span [class]="getStatusClass(review.status)">{{ review.status }}</span>
            </div>

            <div class="rating">
                <span class="stars">
                    <span *ngFor="let star of [1,2,3,4,5]" 
                          class="star"
                          [class.filled]="review.rating >= star">
                        {{ review.rating >= star ? '‚òÖ' : '‚òÜ' }}
                    </span>
                </span>
                <span class="rating-value">{{ review.rating }}/5</span>
            </div>

            <p class="review-content">{{ review.content }}</p>

            <div class="review-actions">
                <button class="btn btn-text" (click)="onMarkHelpful(review)">
                    Helpful ({{ review.helpfulCount }})
                </button>
                <button class="btn btn-text" (click)="onReportReview(review)">
                    Report
                </button>
                <button class="btn btn-text" (click)="onEditReview(review)">Edit</button>
                <button class="btn btn-text delete" (click)="onDeleteReview(review)">Delete</button>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <div *ngIf="!isLoading && !error && reviews.length > 0" class="pagination">
        <button class="btn btn-outline"
                [disabled]="currentPage === 1"
                (click)="onPageChange(currentPage - 1)">
            Previous
        </button>
        <span class="page-info">
            Page {{ currentPage }} of {{ totalPages }}
        </span>
        <button class="btn btn-outline"
                [disabled]="currentPage === totalPages"
                (click)="onPageChange(currentPage + 1)">
            Next
        </button>
    </div>
</div> 